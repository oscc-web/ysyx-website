import{c as N,d as K,k as W,f as P,g as Y,h as X,P as V,B as G,i as D}from"./app-162200f5.js";import{r as L,h as q,c as $,F as _,H as ee,K as te,o as ae,G as se,j as e,R as B,w as le,p as ne,i as ce}from"./framework-e810521c.js";const oe="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";const x=()=>e(V,{name:"close"},()=>e("path",{d:"m925.468 822.294-303.27-310.288L925.51 201.674c34.683-27.842 38.3-75.802 8.122-107.217-30.135-31.37-82.733-34.259-117.408-6.463L512.001 399.257 207.777 87.993C173.1 60.197 120.504 63.087 90.369 94.456c-30.179 31.415-26.561 79.376 8.122 107.217L401.8 512.005l-303.27 310.29c-34.724 27.82-38.34 75.846-8.117 107.194 30.135 31.437 82.729 34.327 117.408 6.486L512 624.756l304.177 311.22c34.68 27.84 87.272 24.95 117.408-6.487 30.223-31.348 26.56-79.375-8.118-107.195z"}));x.displayName="CloseIcon";const A=()=>e(V,{name:"heading"},()=>e("path",{d:"M250.4 704.6H64V595.4h202.4l26.2-166.6H94V319.6h214.4L352 64h127.8l-43.6 255.4h211.2L691 64h126.2l-43.6 255.4H960v109.2H756.2l-24.6 166.6H930v109.2H717L672 960H545.8l43.6-255.4H376.6L333 960H206.8l43.6-255.4zm168.4-276L394 595.4h211.2l24.6-166.6h-211z"}));A.displayName="HeadingIcon";const J=()=>e(V,{name:"heart"},()=>e("path",{d:"M1024 358.156C1024 195.698 892.3 64 729.844 64c-86.362 0-164.03 37.218-217.844 96.49C458.186 101.218 380.518 64 294.156 64 131.698 64 0 195.698 0 358.156 0 444.518 37.218 522.186 96.49 576H96l320 320c32 32 64 64 96 64s64-32 96-64l320-320h-.49c59.272-53.814 96.49-131.482 96.49-217.844zM841.468 481.232 517.49 805.49a2981.962 2981.962 0 0 1-5.49 5.48c-1.96-1.95-3.814-3.802-5.49-5.48L182.532 481.234C147.366 449.306 128 405.596 128 358.156 128 266.538 202.538 192 294.156 192c47.44 0 91.15 19.366 123.076 54.532L512 350.912l94.768-104.378C638.696 211.366 682.404 192 729.844 192 821.462 192 896 266.538 896 358.156c0 47.44-19.368 91.15-54.532 123.076z"}));J.displayName="HeartIcon";const E=()=>e(V,{name:"history"},()=>e("path",{d:"M512 1024a512 512 0 1 1 512-512 512 512 0 0 1-512 512zm0-896a384 384 0 1 0 384 384 384 384 0 0 0-384-384zm192 448H512a64 64 0 0 1-64-64V320a64 64 0 0 1 128 0v128h128a64 64 0 0 1 0 128z"}));E.displayName="HistoryIcon";const H=()=>e(V,{name:"title"},()=>e("path",{d:"M512 256c70.656 0 134.656 28.672 180.992 75.008A254.933 254.933 0 0 1 768 512c0 83.968-41.024 157.888-103.488 204.48C688.96 748.736 704 788.48 704 832c0 105.984-86.016 192-192 192-106.048 0-192-86.016-192-192h128a64 64 0 1 0 128 0 64 64 0 0 0-64-64 255.19 255.19 0 0 1-181.056-75.008A255.403 255.403 0 0 1 256 512c0-83.968 41.024-157.824 103.488-204.544C335.04 275.264 320 235.584 320 192A192 192 0 0 1 512 0c105.984 0 192 85.952 192 192H576a64.021 64.021 0 0 0-128 0c0 35.328 28.672 64 64 64zM384 512c0 70.656 57.344 128 128 128s128-57.344 128-128-57.344-128-128-128-128 57.344-128 128z"}));H.displayName="TitleIcon";const re={0:"标题：$content",1:"作者：$content",2:"分类：$content",3:"标签：$content"},ue=150,U=5,ie={"/":{cancel:"取消",placeholder:"搜索",search:"搜索",select:"选择",navigate:"切换",exit:"关闭",history:"搜索历史",emptyHistory:"无搜索历史",emptyResult:"没有找到结果",loading:"正在加载搜索索引..."}},he="search-pro-history-results",f=N(he,[]),ve=()=>({history:f,addHistory:a=>{f.value.length<U?f.value=[a,...f.value]:f.value=[a,...f.value.slice(0,U-1)]},removeHistory:a=>{f.value=[...f.value.slice(0,a),...f.value.slice(a+1)]}}),de=L(oe),pe=q(()=>JSON.parse(G(de.value))),I=(a,h)=>{const v=a.toLowerCase(),s=h.toLowerCase(),c=[];let l=0,i=0;const d=(t,p=!1)=>{let n="";i===0?n=t.length>20?`… ${t.slice(-20)}`:t:p?n=t.length+i>100?`${t.slice(0,100-i)}… `:t:n=t.length>20?`${t.slice(0,20)} … ${t.slice(-20)}`:t,n&&c.push(n),i+=n.length,p||(c.push(["strong",h]),i+=h.length,i>=100&&c.push(" …"))};let m=v.indexOf(s,l);if(m===-1)return null;for(;m>=0;){const t=m+s.length;if(d(a.slice(l,m)),l=t,i>100)break;m=v.indexOf(s,l)}return i<100&&d(a.slice(l),!0),c},j=a=>a.reduce((h,{type:v})=>h+(v==="title"?50:v==="heading"?20:v==="custom"?10:1),0),me=(a,h)=>{var v;const s={};for(const[c,l]of Object.entries(h)){const i=((v=h[c.replace(/\/[^\\]*$/,"")])==null?void 0:v.title)||"",d=`${i?`${i} > `:""}${l.title}`,m=I(l.title,a);m&&(s[d]=[...s[d]||[],{type:"title",path:c,display:m}]),l.customFields&&Object.entries(l.customFields).forEach(([t,p])=>{p.forEach(n=>{const o=I(n,a);o&&(s[d]=[...s[d]||[],{type:"custom",path:c,index:t,display:o}])})});for(const t of l.contents){const p=I(t.header,a);p&&(s[d]=[...s[d]||[],{type:"heading",path:c+(t.slug?`#${t.slug}`:""),display:p}]);for(const n of t.contents){const o=I(n,a);o&&(s[d]=[...s[d]||[],{type:"content",header:t.header,path:c+(t.slug?`#${t.slug}`:""),display:o}])}}}return Object.keys(s).sort((c,l)=>j(s[c])-j(s[l])).map(c=>({title:c,contents:s[c]}))},ye=a=>{const h=K(),v=L([]),s=q(()=>pe.value[h.value]),c=D(l=>{v.value=l?me(l,s.value):[]},ue);return le([a,h],()=>{c(a.value)}),v};var Le=$({name:"SearchResult",props:{query:{type:String,required:!0}},emits:{close:()=>!0,updateQuery:a=>!0},setup(a,{emit:h}){const v=_(),s=ee(),c=K(),l=W(ie),{history:i,addHistory:d,removeHistory:m}=ve(),t=te(a,"query"),p=ye(t),n=L(0),o=L(0),k=L(),C=q(()=>p.value.length>0),O=q(()=>p.value[n.value]||null),Z=()=>{n.value=n.value>0?n.value-1:p.value.length-1,o.value=O.value.contents.length-1},Q=()=>{n.value=n.value<p.value.length-1?n.value+1:0,o.value=0},w=()=>{o.value<O.value.contents.length-1?o.value=o.value+1:Q()},S=()=>{o.value>0?o.value=o.value-1:Z()},F=r=>r.map(u=>ce(u)?u:e(u[0],u[1])),M=r=>{if(r.type==="custom"){const u=re[r.index]||"$content",[g,z=""]=ne(u)?u[c.value].split("$content"):u.split("$content");return F([g,...r.display,z])}return F(r.display)},T=()=>{n.value=0,o.value=0,h("updateQuery",""),h("close")};return ae(()=>{P("keydown",r=>{if(C.value){if(r.key==="ArrowUp")S();else if(r.key==="ArrowDown")w();else if(r.key==="Enter"){const u=O.value.contents[o.value];s.path!==u.path&&(d(u),v.push(u.path),T())}}}),Y(k.value,{reserveScrollBarGap:!0})}),se(()=>{X()}),()=>e("div",{class:["search-pro-result",{empty:t.value===""?i.value.length===0:!C.value}],ref:k},t.value===""?i.value.length?e("ul",{class:"search-pro-result-list"},e("li",{class:"search-pro-result-list-item"},[e("div",{class:"search-pro-result-title"},l.value.history),i.value.map((r,u)=>e(B,{to:r.path,class:["search-pro-result-item",{active:o.value===u}],onClick:()=>{console.log("click"),T()}},()=>[e(E,{class:"search-pro-result-type"}),e("div",{class:"search-pro-result-content"},[r.type==="content"&&r.header?e("div",{class:"content-header"},r.header):null,e("div",M(r))]),e("button",{class:"search-pro-close-icon",onClick:g=>{g.preventDefault(),g.stopPropagation(),m(u)}},e(x))]))])):l.value.emptyHistory:C.value?e("ul",{class:"search-pro-result-list"},p.value.map(({title:r,contents:u},g)=>{const z=n.value===g;return e("li",{class:["search-pro-result-list-item",{active:z}]},[e("div",{class:"search-pro-result-title"},r||"Documentation"),u.map((y,b)=>{const R=z&&o.value===b;return e(B,{to:y.path,class:["search-pro-result-item",{active:R,"aria-selected":R}],onClick:()=>{d(y),T()}},()=>[y.type==="content"?null:e(y.type==="title"?H:y.type==="heading"?A:J,{class:"search-pro-result-type"}),e("div",{class:"search-pro-result-content"},[y.type==="content"&&y.header?e("div",{class:"content-header"},y.header):null,e("div",M(y))])])})])})):l.value.emptyResult)}});export{Le as default};
